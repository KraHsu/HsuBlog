---
title: Configuration
description: 'How to use the HsuBlog configuration file and its effect'
pubDate: 2023-08-07T02:15:18.018Z
updatedDate: 2023-08-07T02:15:18.018Z
heroColor: ''
themeColor: ''
cover: ''
abbrlink: ll08puki
tags: 
    - 'Configuration'
    - 'Tutorial'
category: 'Quick Start'
lang: 'en'
---

## File Structure

First, locate `src\site_config.ts` and `src\theme_config.ts`, which correspond to the site configuration file and the theme configuration file, respectively.

In addition, there are `astro.config.ts` and `astro-i18next.config.ts`, which are the configuration files for `Astro` and `Astro-i18next`. You typically don't need to worry about these two files for general use.

## Site Configuration

The site configuration is straightforward, `src\site_config.ts`:
```ts
interface SiteConfig {
  site: string; // Site URL, e.g., https://foo.com
  title: string; // Site name, which is displayed on the browser tab
  description: string; // Site description, recognized by search engines
  localSearch: boolean; // Enable local search feature. HsuBlog currently does not support other search methods.
  markdownMath: "Katex" | "Mathjax" | false; // Enable Markdown math support
  i18n: {
    default: string; // Default language of the site
    languages: string[]; // List of supported languages on the site
  };
}
```
### Example

For instance, the configuration used by the Demo site is:
```ts
export const SiteConfig: SiteConfig = {
  site: "https://hsublog.pages.dev",
  title: "HsuBlog",
  description: "HsuBlog Demo page",
  localSearch: true,
  markdownMath: "Katex",
  i18n: {
    default: "en",
    languages: ["zh", "en"],
  },
};
```

## Theme Configuration

`src\theme_config.ts`:

```ts
interface Configs {
  site: Site;
  head: string[];
  body: string[];
  header: Header;
  footer: Footer;
  aside: Aside;
  homePage: HomePageConfig;
  postPage: PostPageConfig;
  tagsPage: TagsPageConfig;
  comments: CommentConfig;
}
```

### Compile-time Dynamic Fields

Since the configuration is exported through TS, to generate dynamic fields, you can simply use the standard TS syntax. For example, to generate the current year:

```ts
const today = new Date();

// Then, where you need to use it:

export const ThemeConfig: Configs = {
    // ...
    xxx: `This year is ${today.getFullYear()}`,
    // ...
}
```

You can also use a function body wrapped with `{{...}}`, where the return value is the desired field:

```ts
export const ThemeConfig: Configs = {
    // ...
    xxx: "This year is {{const today = new Date();return today.getFullYear();}}",
    // ...
}
```

- [ ] **The plan was to make it a runtime dynamic field, but it's not yet implemented, so it's currently generated at compile-time.**

### Site

- [ ] This part of the content overlaps significantly with `SiteConfig`, and is a historical legacy issue that will be fixed in subsequent versions.

```ts
interface Site {
  title: string; // Site title, already configured in the site configuration file
  favicon: string; // Site favicon displayed on the left of the title bar
  logo: string; // Site logo displayed on the left of the header (if logo display is enabled)
  author: string; // Author's name
  localSearch: {
    comment: string; // Comment below the search bar, supports Markdown link format[]()
    hits: string[]; // Recommended buttons below the search bar, supports Markdown link format[]()
  };
  backgroundBubbles: number | false; // Number of background bubbles, false means not enabled
  themeColor: string; // Theme color, please use CSS-supported color format
}
```

### head & body

Content inserted in `<head></head>` and `<body></body>`

For example:
```ts
export const ThemeConfig: Configs = {
    // ...
    head: ["<script>alert('XSS!');</script>"],
    // ...
}
```

### Icon

There are many instances of `icon` in the theme configuration file, supporting the following formats:

Directly import `Vue` or `Astro` components:

```ts
import xxxIcon from "/path/to/component/xxx.vue"
import xxxIcon from "/path/to/component/xxx.astro"
```

`svg` or `i` elements:

```ts
const xxxI = `<i class="fa-solid fa-magnifying-glass"></i>`
const xxxSVG = `<svg>...</svg>`
```

`svg` or image-type file paths:

```ts
const xxxIcon = "https://foo.com/svg/xxx.svg"
const xxxIcon = "/icons/xxx.png"
```

`fontawesome` class:

```ts
const xxxIcon = "fa-solid fa-star"
```
PS: If the icons being used are free, it's preferable to use `local fontawesome`

[local fontawesome](/blog/lkplqhb8):

```ts
const xxxIcon = "local:solid.star"
```

### header
```ts
interface ButtonItem {
  customClass?: string; // Custom class used for adjusting the style of specific elements
  link?: string; // Link
  icon: Function | string; // Icon
  title?: string; // Title displayed in the header of the site
}

interface MenuItem extends ButtonItem {
  name: string; // Menu name
  children?: MenuItem[]; // Submenus if any
}

interface HeaderFunc {
  themeControl: boolean; // Whether to use the mode toggle button
  headerLogo: "left" | "right" | false; // Whether to display the site logo to the left/right of the site name in the header
  pagePercent: boolean; // Whether to enable the percentage button
}

interface Header {
  menu: MenuItem[]; // Menu
  buttons: ButtonItem[]; // Buttons
  functions: HeaderFunc; // Functions
}

```

#### Example

The header configuration for the Demo site is:
```ts
header: {
    menu: [
      {
        name: "主页",
        customClass: "home",
        link: "/",
        icon: "local:solid.house",
      },
      {
        name: "博客",
        customClass: "articles",
        icon: "local:solid.pen-fancy",
        children: [
          {
            name: "分类",
            customClass: "categories",
            icon: "local:solid.hard-drive",
            link: "/categories",
          },
          {
            name: "标签",
            customClass: "tags",
            icon: "local:solid.tags",
            link: "/tags",
          },
        ],
      },
      {
        name: "我的",
        customClass: "mine",
        icon: Person,
        children: [
          {
            name: "友链",
            customClass: "friends",
            icon: "local:solid.link",
            link: "/friends",
          },
          {
            name: "更新日志",
            customClass: "update-log",
            icon: "local:solid.timeline",
            link: "/update-log",
          },
        ],
      },
      {
        name: "关于",
        customClass: "about",
        link: "/about",
        icon: "local:solid.paper-plane",
      },
    ],
    buttons: [
      {
        icon: "local:solid.house",
        link: "/",
        customClass: "",
        title: "返回主页",
      },
    ],
    functions: {
      headerLogo: "left",
      themeControl: true,
      pagePercent: true,
    },
  },
```

### footer
```ts
interface Footer {
  text: string; // Text on the right side of the footer, supports Markdown links
  copyright: string; // Text on the left side of the footer, supports Markdown links
}
```
The customization options for the footer are currently limited, mainly because a more flexible solution has not yet been conceived. Subsequent versions will be updated.

### aside
```ts
interface Aside {
  authorInfo: AuthorInfo; // Author information
  announcement: Announcement; // Announcement
  siteInfo: SiteInfo; // Site information
  customCards: CustomCard[]; // Custom content
}
interface AuthorInfo {
  avatar: string; // Author avatar
  description: string; // Author description
  socialMedias: ButtonItem[]; // Author social media buttons
}

interface Announcement {
  headline: string; // Announcement headline
  content: string; // Announcement content, supports HTML and Markdown links
}

interface SiteInfo {
  busuanzi: boolean; // Whether to enable Busuanzi statistics
  totalWordCounts: boolean; // Whether to count total word count
  totalPostCounts: boolean; // Whether to count total number of posts
}
interface CustomCard {
  icon: string | any; // Icon
  title: string; // Title
  content: string; // Content, supports HTML and Markdown links
  customClass?: string; // Custom class for styling
}
```

PS: Currently, the total word count and total post count are displayed incorrectly in `dev` mode.

#### Example

```ts
aside: {
    authorInfo: {
      avatar: "/avatar.avif",
      description: "一个前端开发者，退役OIer，Robomaster菜鸟",
      socialMedias: [
        {
          link: "https://github.com/KraHsu",
          customClass: "github",
          icon: "local:brands.github",
          title: "github",
        },
        {
          link: "mailto:charles_hus@qq.com",
          customClass: "mail-qq",
          icon: "local:solid.envelope",
          title: "QQmail",
        },
        {
          link: "https://space.bilibili.com/86698256",
          customClass: "bilibili",
          icon: "local:brands.bilibili",
          title: "social-bili",
        },
        {
          link: "https://blog.csdn.net/CharlesHsuu",
          customClass: "csdn",
          icon: "local:solid.c",
          title: "social-csdn",
        },
      ],
    },
    announcement: {
      headline: "Annoucement！",
      content:
        "The theme is constantly being refined and is open to [suggestions](https://github.com/KraHsu/HsuBlog/issues) from anyone~",
    },
    siteInfo: {
      busuanzi: true,
      totalWordCounts: true,
      totalPostCounts: true,
    },
    customCards: [
      {
        icon: "local:solid.star",
        title: "Custom part",
        content: "This is the space reserved for you to play freely",
      },
    ],
  },
```

### homePage
```ts
interface HomePageConfig {
  heroShoot: string | false; // Main page large image
  heroTitle: string; // Large title in the main page large image
  heroDescription: string; // Subtitle/description in the main page large image
  paginationSize: number; // Pagination size for blog list
  aside: AsideConfig; // Main page sidebar configuration
}
interface AsideConfig {
  comps: AsideComponents[]; // Sidebar components list
  stickyComps: AsideComponents[]; // Sidebar components list, but sticky
  direct?: "left" | "right"; // Position of aside
}
type AsideComponents = "Announcement" | "AuthorInfo" | "BlogToc" | "SiteInfo";
```
#### Example

```ts
homePage: {
    heroShoot: "/heroimg.webp",
    heroTitle: "KraHsu's Blog",
    heroDescription: "A beautiful, customized, personal blog theme for Astro",
    paginationSize: 10,
    aside: {
      comps: ["AuthorInfo"],
      stickyComps: ["Announcement", "SiteInfo"],
      direct: "right",
    },
  },
```

### postPage
```ts
interface PostPageConfig {
  aside: AsideConfig; // Blog page sidebar configuration
  relatedPosts: boolean; // Whether to use related articles (local search needs to be enabled)
  defaultCover: string; // Default cover
}
```

#### Example
```ts
postPage: {
    defaultCover: "https://lipsum.app/id/2/1600x1200",
    aside: {
      comps: ["AuthorInfo"],
      stickyComps: [],
    },
    relatedPosts: true,
  },
```

### tagsPage
```ts
interface TagsPageConfig {
  floating: boolean; // Whether to enable tag floating; if enabled, tags will float up and down
}
```

### comments Commenting
Currently supports `twikoo`, `Waline`, `Valine`
```ts
type CommentConfig =
  | TwikooCommentConfig
  | WalineCommentConfig
  | NoCommentConfig
  | ValineCommentConfig;

interface NoCommentConfig {
  type: false;
  options: null;
}
```

::::tabs[comments]
:::tab[twikoo]
`twikoo` is a simple, secure, and free static website commenting system.

For specific configuration, please refer to the [twikoo documentation](https://twikoo.js.org/). You only need to fill in the `envId` and `lang` according to the format (currently does not support internationalization).

```ts 
interface TwikooCommentConfig {
  type: "twikoo";
  options: {
    envId: string;
    lang: string;
  };
}
```
:::

:::tab[valine]
Refer to the [Valine documentation](https://github.com/xCss/Valine) to configure your `LeanCloud` application. Then, fill in the configuration.

```ts
interface ValineCommentConfig {
  type: "valine";
  options: {
    appKey: string;
    appId: string;
  };
}
```
:::

:::tab[Waline]
Basically equivalent to `Valine` with a backend, refer to the [Waline documentation](https://waline.js.org/).

```ts
interface WalineCommentConfig {
  type: "waline";
  options: {
    serverURL: string;
  };
}
```
:::
::::


## i18n

### Generating Basic Files

After configuring the `i18n` item, run `yarn run i18n` in the terminal to automatically generate `src\content\blog\[language]`, `src\pages\[language]` folders, etc. For information on creating and writing pages and content, please see [Creating Content](/blog/lkkeyusn).

### Creating Translation Files

By default, `astro-i18next` expects translations to be organized in `public`:

```bash
public
└── locales  # Please create corresponding files and folders yourself
    ├── en
    |   └── translation.json
    └── zh
        └── translation.json
```

The content of the translation file basically corresponds to the theme configuration file one by one:

::::tabs[i18n]
:::tab[en]
`translation.json`
```json
{
  "site": {
    "author": "KraHsu",
    "title": "Hsu's Blog!",
    "description": "This is a personal blog",
    "localSearch": {
      "comment": "You can use a unix-like format: [Extended Search](/blog/lkk0v40t/)",
      "hits": [
        "[Extended Search](/blog/lkk0v40t/)",
        "[HelloWorld](/blog/lkk0fjvf/)"
      ]
    }
  },
  "header": {
    "menu": {
      "主页": "Home",
      "博客": "Blog",
      "关于": "About",
      "标签": "Tags",
      "我的": "Mine",
      "友链": "Friends",
      "分类": "Cats.",
      "更新日志": "ChangeLog"
    }
  },
  "aside": {
    "authorInfo": {
      "description": "A front-end developer."
    },
    "announcement": {
      "headline": "Announcement!",
      "content": "New theme testing~ Everyone is welcome to [contribute](https://github.com/KraHsu/HsuBlog/issues)~"
    },
    "customCards": {
      "Custom part": {
        "icon": "local:solid.star",
        "title": "Custom Card",
        "content": "This is the custom content section<br>Everything can be placed here"
      }
    }
  },
  "footer": {
    "text": "Design & Build with ❤ by [KraHsu](/about)",
    "copyright": "&copy; 2022-{{const today = new Date();return today.getFullYear();}} By [KraHsu](/about)"
  },
  "homePage": {
    "heroTitle": "KraHsu's Blog",
    "heroDescription": "A beautiful, customized, personal blog theme for Astro"
  },
  "postPage": {
    "pubDate": "Published on {{- pubDate}}", // {{- pubDate}} will be replaced with the publication date. The "-" prevents the string from being escaped.
    "updatedDate": "Updated on {{- updatedDate}}",
    "minutesRead": "Estimated reading {{minutesRead}} minutes", // {{minutesRead}} will be replaced with the reading duration.
    "numberOfWords": "{{numberOfWords}} words"
  },
  "words": {
    "comments": "Comments",
    "search": "Search",
    "prePage": "Prev",
    "nextPage": "Next",
    "articles": "Arts.",
    "categories": "Cats.",
    "tags": "Tags",
    "TOC": "TOC",
    "siteInfo": "SiteInfo",
    "uniqueVisitor": "Unique Visitors",
    "pageView": "Page Views",
    "articlCount": "Article Count",
    "wordCount": "Word Count",
    "relatedPost": "Related Post"
  }
}
```
:::
:::tab[zh]
`translation.json`
```json
{
  "site": {
    "author": "枢衡Krahsu",
    "title": "Hsu's Blog!",
    "description": "这是一个个人博客",
    "localSearch": {
      "comment": "你可以使用类似 unix 的格式：[扩展搜索](/blog/lkk0v40t/)",
      "hits": [
        "[扩展搜索](/blog/lkk0v40t/)",
        "[HelloWorld](/blog/lkk0fjvf/)"
      ]
    }
  },
  "header": {
    "menu": {
      "主页": "主页",
      "博客": "博客",
      "关于": "关于",
      "标签": "标签",
      "我的": "我的",
      "友链": "友链",
      "分类": "分类"
    }
  },
  "aside": {
    "authorInfo": {
      "description": ""
    },
    "announcement": {
      "headline": "看公告啦！",
      "content": "新主题试验中~ 欢迎各位[找茬](https://github.com/KraHsu/HsuBlog/issues)~"
    },
    "customCards": {
      "Custom part": {
        "icon": "local:solid.star",
        "title": "自定义部分",
        "content": "这里是自定义内容部分<br>啥都可以放"
      }
    }
  },
  "footer": {
    "text": "Design & Build with ❤ by [枢衡KraHsu](/about)",
    "copyright": "&copy; 2022-{{const today = new Date();return today.getFullYear();}} By [枢衡KraHsu](/about)"
  },
  "homePage": {
    "heroTitle": "枢衡の学习日志",
    "heroDescription": "一个漂亮且客制化的Astro个人博客主题"
  },
  "postPage": {
    "pubDate": "发表于 {{- pubDate}}", // {{- pubDate}} 会被替换为发布日期， - 的作用是防止字符串被转义
    "updatedDate": "更新于 {{- updatedDate}}",
    "minutesRead": "预计阅读 {{minutesRead}} 分钟", // {{minutesRead}} 会被替换为阅读时长
    "numberOfWords": "{{numberOfWords}} 字"
  },
  "words": {
    "comments": "评论",
    "search": "搜索",
    "prePage": "上一页",
    "nextPage": "下一页",
    "articles": "文章",
    "categories": "分类",
    "tags": "标签",
    "TOC": "文章内容",
    "siteInfo": "网站信息",
    "uniqueVisitor": "网站访客量",
    "pageView": "网站浏览量",
    "articlCount": "文章数",
    "wordCount": "字数",
    "relatedPost": "相关文章"
  }
}
```
:::
::::