---
title: 配置文件
description: '如何使用HsuBlog的配置文件，及其效果'
pubDate: 2023-08-07T02:15:18.018Z
updatedDate: 2023-08-07T02:15:18.018Z
heroColor: ''
themeColor: ''
cover: ''
abbrlink: ll08puki
tags: 
    - '教程'
    - '配置文件'
category: '快速开始'
lang: 'zh'
---

## 文件结构

首先找到 `src\site_config.ts` 和 `src\theme_config.ts`，他们对应的就是站点配置文件和主题配置文件

除此以外，还有 `astro.config.ts` 和 `astro-i18next.config.ts`，分别是 `Astro` 和 `Astro-i18next` 的配置文件，普通使用时不用管这两个文件

## 站点配置

站点配置非常简单，`src\site_config.ts`：
```ts
interface SiteConfig {
  site: string; // 站点 URL 比如 https://foo.com
  title: string; // 站点名称 也就是页面选项卡上所显示的内容
  description: string; // 站点描述 会被搜索引擎识别
  localSearch: boolean; // 是否开启本地搜索功能 HsuBlog 目前还不支持其它搜索方式
  markdownMath: "Katex" | "Mathjax" | false; // 是否启用 Markdown 数学支持
  i18n: {
    default: string; // 站点默认语言
    languages: string[]; // 站点支持语言的列表
  };
}
```
### 示例

比如，Demo 站所用的站点配置为：
```ts
export const SiteConfig: SiteConfig = {
  site: "https://hsublog.pages.dev",
  title: "HsuBlog",
  description: "HsuBlog Demo 页面",
  localSearch: true,
  markdownMath: "Katex",
  i18n: {
    default: "en",
    languages: ["zh", "en"],
  },
};
```


## 主题配置

`src\theme_config.ts`：

```ts
interface Configs {
  site: Site;
  head: string[];
  body: string[];
  header: Header;
  footer: Footer;
  aside: Aside;
  homePage: HomePageConfig;
  postPage: PostPageConfig;
  tagsPage: TagsPageConfig;
  comments: CommentConfig;
}
```

### 编译期动态字段

因为通过ts导出配置，想要生成动态字段就正常使用ts语法即可，比如生成当前年份：

```ts
const today = new Date();

//然后在需要使用的地方

export const ThemeConfig: Configs = {
    // ...
    xxx: `This year is ${today.getFullYear()}`,
    // ...
}
```

也可以使用 `{{...}}` 包裹的函数体，返回值即为所需字段

```ts
export const ThemeConfig: Configs = {
    // ...
    xxx: "This year is {{const today = new Date();return today.getFullYear();}}",
    // ...
}
```

- [ ] **预计是做成运行期动态字段的，但是目前还没实现，所以也是编译期生成**

### Site

- [ ] 这部分内容与 `SiteConfig` 有大量重叠，属于历史遗留问题，后续版本会修正

```ts
interface Site {
  title: string; // 站点标题，已在站点配置文件中配置
  favicon: string; // 站点 favicon 显示在标题栏左侧
  logo: string; // 站点logo 显示在 header 左侧（如果开启 logo 显示）
  author: string; // 作者名
  localSearch: {
    comment: string; // 搜索栏下方注释 支持 Markdown 链接格式[]()
    hits: string[]; // 搜索栏下方推荐按钮 支持 Markdown 链接格式[]()
  };
  backgroundBubbles: number | false; // 背景泡泡数量，false 为不开启
  themeColor: string; // 主题色 请使用 css 支持的颜色格式
}
```

### head & body

在 `<head></head>` 和 `<body></body>` 中插入的内容

比如：
```ts
export const ThemeConfig: Configs = {
    // ...
    head: ["<script>alert('XSS!');</script>"],
    // ...
}
```

### Icon

主题配置文件中有许多处用到了 `icon`，支持以下格式：

直接引入 `Vue` 或 `Astro` 组件：

```ts
import xxxIcon from "/path/to/component/xxx.vue"
import xxxIcon from "/path/to/component/xxx.astro"
```

`svg` 或 `i` 元素：

```ts
const xxxI = `<i class="fa-solid fa-magnifying-glass"></i>`
const xxxSVG = `<svg>...</svg>`
```

`svg` 或图片类型文件路径：

```ts
const xxxIcon = "https://foo.com/svg/xxx.svg"
const xxxIcon = "/icons/xxx.png"
```

`fontawesome` 类：

```ts
const xxxIcon = "fa-solid fa-star"
```
PS：如果使用的图标是免费图标，则应尽量使用 `local fontawesome`

[local fontawesome](/zh/blog/lkplqhb8)：

```ts
const xxxIcon = "local:solid.star"
```

### header
```ts
interface ButtonItem {
  customClass?: string; // 自定义类 用于调整部分特定元素样式
  link?: string; // 链接
  icon: Function | string; // Icon
  title?: string; // 显示在 header 的站点标题
}

interface MenuItem extends ButtonItem {
  name: string; // 菜单名称
  children?: MenuItem[]; // 是否有子菜单
}

interface HeaderFunc {
  themeControl: boolean; // 是否使用 模式切换 按钮
  headerLogo: "left" | "right" | false; // 是否在 header 站点名称的左/右侧显示站点 logo
  pagePercent: boolean; // 是否启用百分比按钮
}

interface Header {
  menu: MenuItem[]; // 菜单
  buttons: ButtonItem[]; // 按钮
  functions: HeaderFunc; // 功能
}

```

#### 示例

Demo 站的header配置为：
```ts
header: {
    menu: [
      {
        name: "主页",
        customClass: "home",
        link: "/",
        icon: "local:solid.house",
      },
      {
        name: "博客",
        customClass: "articles",
        icon: "local:solid.pen-fancy",
        children: [
          {
            name: "分类",
            customClass: "categories",
            icon: "local:solid.hard-drive",
            link: "/categories",
          },
          {
            name: "标签",
            customClass: "tags",
            icon: "local:solid.tags",
            link: "/tags",
          },
        ],
      },
      {
        name: "我的",
        customClass: "mine",
        icon: Person,
        children: [
          {
            name: "友链",
            customClass: "friends",
            icon: "local:solid.link",
            link: "/friends",
          },
          {
            name: "更新日志",
            customClass: "update-log",
            icon: "local:solid.timeline",
            link: "/update-log",
          },
        ],
      },
      {
        name: "关于",
        customClass: "about",
        link: "/about",
        icon: "local:solid.paper-plane",
      },
    ],
    buttons: [
      {
        icon: "local:solid.house",
        link: "/",
        customClass: "",
        title: "返回主页",
      },
    ],
    functions: {
      headerLogo: "left",
      themeControl: true,
      pagePercent: true,
    },
  },
```

### footer
```ts
interface Footer {
  text: string; // footer 右侧文字 支持 Markdown 链接
  copyright: string; // footer 左侧文字 支持 Markdown 链接
}
```
footer 目前客制化选项不是很多，主要是还没想出一个可塑性比较强的方案，后续版本会更新

### aside
```ts
interface Aside {
  authorInfo: AuthorInfo; // 作者信息
  announcement: Announcement; // 公告
  siteInfo: SiteInfo; // 网站信息
  customCards: CustomCard[]; // 自定义内容
}
interface AuthorInfo {
  avatar: string; // 作者头像
  description: string; // 作者简介
  socialMedias: ButtonItem[]; // 作者社交按钮
}

interface Announcement {
  headline: string; // 公告标题
  content: string; // 公告内容 支持 html 和 Markdown 链接
}

interface SiteInfo {
  busuanzi: boolean; // 是否开启不蒜子统计
  totalWordCounts: boolean; // 是否统计总字数
  totalPostCounts: boolean; // 是否统计总文章数
}
interface CustomCard {
  icon: string | any; // Icon
  title: string; // 标题
  content: string; // 内容 支持 html 和 Markdown 链接
  customClass?: string; // 自定义类 用于自定义样式
}
```

PS: 目前统计总字数和总文章数在`dev`模式下显示值错误

#### 示例

```ts
aside: {
    authorInfo: {
      avatar: "/avatar.avif",
      description: "一个前端开发者，退役OIer，Robomaster菜鸟",
      socialMedias: [
        {
          link: "https://github.com/KraHsu",
          customClass: "github",
          icon: "local:brands.github",
          title: "github",
        },
        {
          link: "mailto:charles_hus@qq.com",
          customClass: "mail-qq",
          icon: "local:solid.envelope",
          title: "QQmail",
        },
        {
          link: "https://space.bilibili.com/86698256",
          customClass: "bilibili",
          icon: "local:brands.bilibili",
          title: "social-bili",
        },
        {
          link: "https://blog.csdn.net/CharlesHsuu",
          customClass: "csdn",
          icon: "local:solid.c",
          title: "social-csdn",
        },
      ],
    },
    announcement: {
      headline: "Annoucement！",
      content:
        "The theme is constantly being refined and is open to [suggestions](https://github.com/KraHsu/HsuBlog/issues) from anyone~",
    },
    siteInfo: {
      busuanzi: true,
      totalWordCounts: true,
      totalPostCounts: true,
    },
    customCards: [
      {
        icon: "local:solid.star",
        title: "Custom part",
        content: "This is the space reserved for you to play freely",
      },
    ],
  },
```

### homePage
```ts
interface HomePageConfig {
  heroShoot: string | false; // 主页面大图
  heroTitle: string; // 主页面大图中的大标题
  heroDescription: string; // 主页面大图中的副标题/描述
  paginationSize: number; // 博客列表分页数
  aside: AsideConfig; // 主页面侧边栏配置
}
interface AsideConfig {
  comps: AsideComponents[]; // 侧边栏组件列表
  stickyComps: AsideComponents[]; // 侧边栏组件列表 但是 sticky
  direct?: "left" | "right"; // aside 的位置
}
type AsideComponents = "Announcement" | "AuthorInfo" | "BlogToc" | "SiteInfo";
```
#### 示例

```ts
homePage: {
    heroShoot: "/heroimg.webp",
    heroTitle: "KraHsu's Blog",
    heroDescription: "A beautiful, customized, personal blog theme for Astro",
    paginationSize: 10,
    aside: {
      comps: ["AuthorInfo"],
      stickyComps: ["Announcement", "SiteInfo"],
      direct: "right",
    },
  },
```

### postPage
```ts
interface PostPageConfig {
  aside: AsideConfig; // 博客也侧边栏配置
  relatedPosts: boolean; // 是否使用相关文章（需要开启本地搜索）
  defaultCover: string; // 默认 cover
}
```

#### 示例
```ts
postPage: {
    defaultCover: "https://lipsum.app/id/2/1600x1200",
    aside: {
      comps: ["AuthorInfo"],
      stickyComps: [],
    },
    relatedPosts: true,
  },
```

### tagsPage
```ts
interface TagsPageConfig {
  floating: boolean; // 是否开启标签浮动 开启后标签会上下浮动
}
```

### comments 评论
目前支持 `twikoo` `Waline` `Valine`
```ts
type CommentConfig =
  | TwikooCommentConfig
  | WalineCommentConfig
  | NoCommentConfig
  | ValineCommentConfig;

interface NoCommentConfig {
  type: false;
  options: null;
}
```

::::tabs[comments]
:::tab[twikoo]
`twikoo` 是一个简洁、安全、免费的静态网站评论系统。

具体配置请参照 [twikoo文档](https://twikoo.js.org/)，只需要按照格式填写 `envId` 和 `lang` 就可以了(目前不支持国际化)

```ts 
interface TwikooCommentConfig {
  type: "twikoo";
  options: {
    envId: string;
    lang: string;
  };
}
```
:::

:::tab[valine]
参照[Valine文档](https://github.com/xCss/Valine)去配置你的 `LeanCloud` 应用。然后填写配置即可。

```ts
interface ValineCommentConfig {
  type: "valine";
  options: {
    appKey: string;
    appId: string;
  };
}
```
:::

:::tab[Waline]
基本相当于带后端的 `Valine` ，参照 [Waline文档](https://waline.js.org/)。

```ts
interface WalineCommentConfig {
  type: "waline";
  options: {
    serverURL: string;
  };
}
```
:::
::::


## i18n

### 生成基本文件

配置好 `i18n` 项后，在终端运行 `yarn run i18n` 后自动生成 `src\content\blog\[language]`，`src\pages\[language]` 等文件夹，关于页面和内容的创建和书写请见[创建内容](/zh/blog/lkkeyusn)

### 创建翻译文件

默认情况下，`astro-i18next` 期望翻译被组织在 `public` 中:

```bash
public
└── locales  # 请自行创建对应文件及文件夹
    ├── en
    |   └── translation.json
    └── zh
        └── translation.json
```

翻译文件内容基本与主题配置文件一一对应：

::::tabs[i18n]
:::tab[zh]
`translation.json`
```json
{
  "site": {
    "author": "枢衡Krahsu",
    "title": "Hsu's Blog!",
    "description": "这是一个个人博客",
    "localSearch": {
      "comment": "你可以使用类似 unix 的格式：[扩展搜索](/blog/lkk0v40t/)",
      "hits": [
        "[扩展搜索](/blog/lkk0v40t/)",
        "[HelloWorld](/blog/lkk0fjvf/)"
      ]
    }
  },
  "header": {
    "menu": {
      "主页": "主页",
      "博客": "博客",
      "关于": "关于",
      "标签": "标签",
      "我的": "我的",
      "友链": "友链",
      "分类": "分类"
    }
  },
  "aside": {
    "authorInfo": {
      "description": ""
    },
    "announcement": {
      "headline": "看公告啦！",
      "content": "新主题试验中~ 欢迎各位[找茬](https://github.com/KraHsu/HsuBlog/issues)~"
    },
    "customCards": {
      "Custom part": {
        "icon": "local:solid.star",
        "title": "自定义部分",
        "content": "这里是自定义内容部分<br>啥都可以放"
      }
    }
  },
  "footer": {
    "text": "Design & Build with ❤ by [枢衡KraHsu](/about)",
    "copyright": "&copy; 2022-{{const today = new Date();return today.getFullYear();}} By [枢衡KraHsu](/about)"
  },
  "homePage": {
    "heroTitle": "枢衡の学习日志",
    "heroDescription": "一个漂亮且客制化的Astro个人博客主题"
  },
  "postPage": {
    "pubDate": "发表于 {{- pubDate}}", // {{- pubDate}} 会被替换为发布日期， - 的作用是防止字符串被转义
    "updatedDate": "更新于 {{- updatedDate}}",
    "minutesRead": "预计阅读 {{minutesRead}} 分钟", // {{minutesRead}} 会被替换为阅读时长
    "numberOfWords": "{{numberOfWords}} 字"
  },
  "words": {
    "comments": "评论",
    "search": "搜索",
    "prePage": "上一页",
    "nextPage": "下一页",
    "articles": "文章",
    "categories": "分类",
    "tags": "标签",
    "TOC": "文章内容",
    "siteInfo": "网站信息",
    "uniqueVisitor": "网站访客量",
    "pageView": "网站浏览量",
    "articlCount": "文章数",
    "wordCount": "字数",
    "relatedPost": "相关文章"
  }
}
```
:::
:::tab[en]
`translation.json`
```json
{
  "site": {
    "author": "KraHsu",
    "title": "Hsu's Blog!",
    "description": "This is a personal blog",
    "localSearch": {
      "comment": "You can use a unix-like format: [Extended Search](/blog/lkk0v40t/)",
      "hits": [
        "[Extended Search](/blog/lkk0v40t/)",
        "[HelloWorld](/blog/lkk0fjvf/)"
      ]
    }
  },
  "header": {
    "menu": {
      "主页": "Home",
      "博客": "Blog",
      "关于": "About",
      "标签": "Tags",
      "我的": "Mine",
      "友链": "Friends",
      "分类": "Cats.",
      "更新日志": "ChangeLog"
    }
  },
  "aside": {
    "authorInfo": {
      "description": "A front-end developer."
    },
    "announcement": {
      "headline": "Announcement!",
      "content": "New theme testing~ Everyone is welcome to [contribute](https://github.com/KraHsu/HsuBlog/issues)~"
    },
    "customCards": {
      "Custom part": {
        "icon": "local:solid.star",
        "title": "Custom Card",
        "content": "This is the custom content section<br>Everything can be placed here"
      }
    }
  },
  "footer": {
    "text": "Design & Build with ❤ by [KraHsu](/about)",
    "copyright": "&copy; 2022-{{const today = new Date();return today.getFullYear();}} By [KraHsu](/about)"
  },
  "homePage": {
    "heroTitle": "KraHsu's Blog",
    "heroDescription": "A beautiful, customized, personal blog theme for Astro"
  },
  "postPage": {
    "pubDate": "Published on {{- pubDate}}", // {{- pubDate}} will be replaced with the publication date. The "-" prevents the string from being escaped.
    "updatedDate": "Updated on {{- updatedDate}}",
    "minutesRead": "Estimated reading {{minutesRead}} minutes", // {{minutesRead}} will be replaced with the reading duration.
    "numberOfWords": "{{numberOfWords}} words"
  },
  "words": {
    "comments": "Comments",
    "search": "Search",
    "prePage": "Prev",
    "nextPage": "Next",
    "articles": "Arts.",
    "categories": "Cats.",
    "tags": "Tags",
    "TOC": "TOC",
    "siteInfo": "SiteInfo",
    "uniqueVisitor": "Unique Visitors",
    "pageView": "Page Views",
    "articlCount": "Article Count",
    "wordCount": "Word Count",
    "relatedPost": "Related Post"
  }
}
```
:::
::::